<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-Commerce</title>

    <link rel="stylesheet" type="text/css" href="styles.css" />
    <link rel="icon" href="img/logo.svg" />
    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>

    <!--Font awesome!-->
    <script
      src="https://kit.fontawesome.com/f4e855eb8f.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div class="container pt-3">
      <div class="input-group">
        <a class="navbar-brand" href="/index.html">
          <img alt="logo" class="me-3 me-md-5" src="img/logo.svg"
        /></a>
        <!--LOGO!-->

        <input
          type="text"
          id="input-form"
          class="form-control"
          placeholder="Search"
          aria-label="Text input with dropdown button"
        />
        <button title="Search" class="btn btn-primary d-lg-block">
          <a href="#products" class="rounded d-lg-block"
            ><i
              class="fa-solid fa-magnifying-glass rounded d-lg-block"
              style="color: white"
            ></i
          ></a>
        </button>

        <div class="ms-md-5 mt-2 mt-md-0">
          <a
            type="button"
            class="btn btn-outline-primary fw-500 rounded"
            href="/index.html"
          >
            <i class="fa-solid fa-home me-lg-2"></i>
            <p class="d-none d-lg-inline">Home</p>
          </a>
          <a
            type="button"
            class="btn btn-outline-primary fw-500 rounded"
            href="/wishlist.html"
          >
            <i class="fa-solid fa-heart me-lg-2"></i>
            <p class="d-none d-lg-inline">Wishlist</p>
          </a>
          <a
            type="button"
            class="btn btn-outline-primary fw-500 rounded active"
            href="/cart.html"
          >
            <i class="fa-solid fa-cart-shopping me-lg-2"></i>
            <p class="d-none d-lg-inline">My Cart</p>
          </a>
        </div>
      </div>
    </div>

    <hr />

    <!--  Cart Products section   -->

    <div class="py-5">
      <div class="container">
        <h3 class="fw-bold mb-sm-3 mb-md-5 text-center text-md-start">
          My Cart
        </h3>

        <!-- <h4 class="fw-bold text-center">No Products in your Card Yet!</h4> -->
        <br />
        <div
          id="product-container"
          class="g-3 d-flex flex-wrap justify-content-evenly g-10"
        >
          <!-- <div  class="row g-3 d-flex justify-content-evenly"> -->

          <!-- Products will be dynamically added here -->
        </div>
      </div>
      <!--row and container div--->
    </div>

    <!-- Checkout details -->
    <div id="checkout-details" class="py-5">
      <!-- Notification for total cost -->

      <div class="container">
        <div
          id="notification"
          style="
            display: none;
            justify-content: center;
            align-items: center;
            justify-self: center;
          "
          class="border border-primary rounded text-primary checkoutnotif"
        ></div>
        <div id="checkout-items"></div>
        <div
          id="notification-total"
          class="border border-primary rounded text-primary mt-3"
          style="display: none"
        ></div>
        <button class="border border-primary text-primary mt-3 checkout">
          Check Total
        </button>
      </div>
    </div>

    <!-- Footer -->
    <div class="py-5 footer-container">
      <div class="container" style="z-index: 1">
        <div class="row d-flex">
          <div class="col-md-12 col-lg-3 mb-3">
            <img alt="logo" src="/img/logo.svg" />
            <p class="mt-4 footer-text">
              Â© 2024 <br />
              All rights reserved.
            </p>
          </div>

          <div class="col-6 col-sm-6 col-md-4 col-lg-2">
            <h6 class="h6 fw-bold footer-text">Information</h6>

            <a href="#" class="text-decoration-none text-muted footer-link"
              >About us</a
            >
            <a href="#" class="text-decoration-none text-muted footer-link"
              >Find stories</a
            >
            <a href="#" class="text-decoration-none text-muted footer-link"
              >Categories</a
            >
          </div>

          <div class="col-6 col-sm-6 col-md-4 col-lg-2">
            <h6 class="h6 fw-bold">Stores</h6>
          </div>

          <div class="col-6 col-sm-6 col-md-4 col-lg-2 mt-3 mt-md-0">
            <h6 class="h6 fw-bold">Support</h6>
          </div>

          <div class="col-lg-3 mt-3 mt-lg-0" style="z-index: 10">
            <h6 class="h6 fw-bold">Newsletter</h6>
            <div class="input-group" style="padding-top: 15px">
              <input
                type="text"
                class="form-control"
                placeholder="Email"
                aria-label="Email"
                aria-describedby="basic-addon2"
                style="background: none; gap: 20px"
              />
              <div class="input-group-append" style="padding-left: 10px">
                <button class="btn btn-primary" type="button">Join</button>
              </div>
            </div>
          </div>
        </div>
        <!--row div-->
      </div>
      <div class="mountain"></div>
    </div>

    <script src="js/product.js"></script>
    <script src="js/cart.js"></script>
    <script>
      // Define function to calculate total cost
      function calculateTotalCost(cart) {
        let totalCost = 0;
        cart.forEach((product) => {
          // Convert price to number before adding to totalCost
          totalCost += parseFloat(product.price);
        });
        return totalCost;
      }

      document.addEventListener("DOMContentLoaded", function () {
        const checkoutButton = document.querySelector(".checkout");
        const notification = document.getElementById("notification");
        const productContainer = document.getElementById("product-container");

        // Function to update total cost
        function updateTotalCost() {
          let totalCost = 0;
          const productItems = document.querySelectorAll(".product-item");
          productItems.forEach((item) => {
            const price = parseFloat(item.dataset.price);
            const quantity = parseInt(item.querySelector(".quantity").value);
            totalCost += price * quantity;
          });
          notification.innerText =
            "Total Cost: $" +
            totalCost.toFixed(2) +
            "\nPlease Contact the Seller on +250 790 000 001";
        }

        // Event listener for quantity change
        productContainer.addEventListener("change", function (event) {
          if (event.target.classList.contains("quantity")) {
            updateTotalCost();
          }
        });

        // Event listener for checkout button click
        checkoutButton.addEventListener("click", function () {
          // Retrieve cart data from local storage
          const cart = JSON.parse(localStorage.getItem("cart")) || [];

          // Clear previous product items
          productContainer.innerHTML = "";

          // Display each product in the cart
          cart.forEach((product) => {
            const productItem = document.createElement("div");
            productItem.classList.add("product-item");
            productItem.dataset.price = parseFloat(product.price);

            productItem.innerHTML = `
                <p>${product.title} - $${product.price}</p>
                <select class="form-select quantity">
                    ${Array.from(
                      { length: 10 },
                      (_, i) => `<option value="${i + 1}">${i + 1}</option>`
                    ).join("")}
                </select>
            `;

            productContainer.appendChild(productItem);
          });

          // Update total cost initially
          updateTotalCost();

          // Display notification
          notification.style.display = "block";
        });
      });
    </script>
    <script>
      function showNotification() {
        const notification = document.getElementById("notification");
        const checkoutButton = document.querySelector(".checkout");
        notification.style.display = "block";
        checkoutButton.style.display = "none";
      }

      // Function to hide notification and show checkout button
      function hideNotification() {
        const notification = document.getElementById("notification");
        const checkoutButton = document.querySelector(".checkout");
        notification.style.display = "none";
        checkoutButton.style.display = "block";
      }
    </script>
  </body>
</html>
